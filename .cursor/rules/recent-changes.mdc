---
alwaysApply: true
---
# Recent Changes (Rolling Log)

Agent åœ¨æ¯æ¬¡ session çµæŸæ™‚æ›´æ–°æ­¤æª”æ¡ˆã€‚ä¿ç•™æœ€è¿‘ 7 å¤©çš„æ¢ç›®ï¼ˆç²¾ç°¡æ ¼å¼ï¼‰ï¼Œè¶…éçš„åˆªé™¤ã€‚
æ–° Chat é–‹å•Ÿæ™‚ agent å¯å¾æ­¤è™•äº†è§£æœ€è¿‘ç™¼ç”Ÿçš„æ‰€æœ‰è®Šæ›´ã€‚

---

## 2026-02-28

### å·¥å…·éˆå¥åº·å¯©è¨ˆ + ä¿®å¾©ï¼ˆQuant Developerï¼‰
- **BUG ä¿®å¾©**: `validate.py` WFA/MC/Kelly/LOAO å…¨éƒ¨åŠ å…¥ `data_dir` ç©¿é€ï¼ˆä¹‹å‰ç¼ºå¤±å°è‡´ funding rate æœªè¨ˆç®—ï¼‰
- **BUG ä¿®å¾©**: `cross_asset.py` `BacktestFunction` protocol + `BaseValidator` + æ‰€æœ‰ä¾¿æ·å‡½æ•¸åŠ å…¥ `data_dir`
- **BUG ä¿®å¾©**: `kelly_validation.py` `kelly_backtest_comparison()` åŠ å…¥ `data_dir`
- **æ£„ç”¨**: `probability_of_backtest_overfitting()` æ”¹å `_simplified_pbo_estimate()` ä¸¦å¾ `__init__.py` exports ç§»é™¤
- **æ¨™æº–åŒ–**: `AppConfig.resolve_kline_path()` / `resolve_kline_paths()` å…±ç”¨å‡½æ•¸ï¼Œçµ±ä¸€æ•¸æ“šè·¯å¾‘
- **ä¿®å¾©**: `run_walk_forward.py` / `run_oi_bb_rv_research.py` ç§»é™¤ `"klines"` å›é€€é‚è¼¯ï¼Œæ”¹ç”¨ `resolve_kline_path()`
- **æ¸¬è©¦**: æ–°å¢ `test_validation_pipeline.py`ï¼ˆ12 testsï¼‰+ `test_data_dir_propagation.py`ï¼ˆ8 testsï¼‰
- **Skill**: æ–°å¢ `.cursor/skills/dev/toolchain-integrity-checklist.md`
- å…¨éƒ¨ 407 æ¸¬è©¦é€šé

### Agent æ¶æ§‹ç˜¦èº«ï¼ˆå…¨åŸŸï¼‰
- 5 å€‹ agent `.md` å…¨é¢é‡æ§‹ï¼šæŠ½å– 18 å€‹ skill æª”åˆ° `.cursor/skills/{alpha,dev,validation,risk,ops}/`
- Agent æ ¸å¿ƒ `.md` ç²¾ç°¡è‡³ ~70-115 è¡Œï¼ˆåŸ 185-750 è¡Œï¼‰ï¼Œåªä¿ç•™èº«ä»½+æ ¸å¿ƒè¦å‰‡+skills ç´¢å¼•
- `.cursorrules` ç¨æœ‰å…§å®¹ï¼ˆBinance API gotchasï¼‰ç§»å…¥ `skills/dev/binance-api-gotchas.md`ï¼Œ`.cursorrules` åˆªé™¤
- `recent-changes.mdc` 52KBâ†’~4KBï¼Œ`project-overview.mdc` ç²¾ç°¡è‡³ç•¶å‰ç‹€æ…‹

### Tier Ablation ç ”ç©¶ + Config E ç°¡åŒ–å€™é¸ï¼ˆAlpha Researcherï¼‰
- 5-config ablation: A=prod(SR 3.77), B=all default(3.57), C=all tsmom_heavy(3.57), D=BTC no-breakout(3.66), E=simplified(3.85)
- ç™¼ç¾: B=C â†’ w_tsmom/w_basis_carry æ˜¯ dead paramsï¼ˆconfirmatory æ¨¡å¼ä¸è®€å–ï¼‰
- ç™¼ç¾: BTC breakout_vol_atr æ˜¯è² è²¢ç»ï¼ˆBTC SR 2.02â†’1.99, Î”=-0.03ï¼‰, 20 params ç™½æ­
- ç™¼ç¾: BTC 720h lookback åƒ¹å€¼ +0.38 per-sym SRï¼ˆ1.64â†’2.02ï¼‰ï¼Œåƒ… 3 extra params
- Config Eï¼ˆç°¡åŒ–å€™é¸ï¼‰: SR 3.85 > prod 3.77, MDD -3.67% < -3.91%, params -47%
- å»ºè­°: Config E â†’ Quant Dev æ­£å¼ validation â†’ æ›¿æ›ç”Ÿç”¢
- æ­¸æª” 3 ablation configs â†’ `config/archive/`
- æ›´æ–° `docs/ALPHA_RESEARCH_MAP.md`ï¼ˆDead Ends + coverage map + æ›´æ–°ç´€éŒ„ï¼‰

### Config E æ­£å¼ Validation + Config Freezeï¼ˆQuant Developerï¼‰
- WFA: 8/8 OOS+, avg degradation 27.9%, æ¯å€‹ split éƒ½æ­£æ”¶ç›Š
- CPCV: PBO max 0.13 (SOL/DOGE/ADA), rest 0.07 â€” èˆ‡ prod å®Œå…¨ç›¸åŒ
  - 4/8 symbols æœ‰è²  degradationï¼ˆOOS > ISï¼Œå¼· anti-overfitting ä¿¡è™Ÿï¼‰
- DSR: 1.42 (p<0.001) â†’ PASS
- Cross-Asset LOAO: robust, -0.9% avg degradation
- Monte Carlo: avg VaR95% = 0.19%
- Pre-Deploy: 11 PASS / 3 WARN / 0 FAIL
- Config freeze: `prod_candidate_simplified.yaml`ï¼ˆSR 3.85, MDD -3.67%, params -47%ï¼‰

### Risk Manager Pre-Launch Audit â€” APPROVEDï¼ˆRisk Managerï¼‰
- MC ç¨ç«‹é‡è·‘ 10,000 sims: 8/8 symbols VaR95% 0.18-0.20%, avg 0.19% â†’ PASS
- Kelly: 8/8 PASS, all recommend 25% Kelly (Full Kelly 8.3-15.8%)
- Portfolio Risk: HHI=0.127 < 0.2, BTC+ETH=30% < 40%, VaR95% 0.19% << 5%
- Risk Limits: MDD -3.67% vs circuit breaker 40% â†’ 36.3% headroom
- meta_blend: auto_delay=False âœ…, no double-delay, concentration OK
- æ‰€æœ‰è®Šæ›´ç‚ºç°¡åŒ–æ“ä½œï¼ˆç§»é™¤è²  alpha + dead paramsï¼‰ï¼Œé¢¨éšªé™ä½
- **Verdict: APPROVED**ï¼Œ14-day observation period â†’ 2026-03-14

### Simplified ç­–ç•¥éƒ¨ç½²åˆ° Oracle Cloudï¼ˆDevOpsï¼‰
- Config `prod_candidate_simplified.yaml` æ›¿æ› `prod_candidate_htf_lsr.yaml`
- é‡å»º `meta_blend_live` tmux session
- Post-deploy é©—è­‰: 8/8 symbols âœ…, tier routing æ­£ç¢º, overlay ON, ç„¡ breakout
- Observation period: 2026-02-28 ~ 2026-03-14
- Rollback L1: `prod_candidate_htf_lsr.yaml` (SR=3.77)

### ç³»çµ±æ€§ Look-Ahead æ ¹å› ä¿®å¾© + CI é˜²è­·ï¼ˆQuant Developerï¼‰
- æ–°å¢ `causal_resample_align()` å…±ç”¨å‡½æ•¸ï¼ˆ`src/qtrade/strategy/filters.py`ï¼‰
- é·ç§» 6 å€‹éç”Ÿç”¢è·¯å¾‘çš„ look-ahead ä½ç½®
- ä¿®æ­£ 4 ä»½ `_resample_ohlcv()` docstring
- æ–°å¢ CI é˜²è­· `tests/test_resample_shift_guard.py`ï¼ˆ3 testsï¼‰
- æ›´æ–° anti-bias.mdc Â§5ã€ŒHTF Resample + Reindex: å¿…é ˆ shift(1)ã€
- 366 æ¸¬è©¦é€šé

### OI Regime Filter EDA â€” WEAK GOï¼ˆAlpha Researcherï¼‰
- 13 OI regime indicators Ã— 8 symbolsï¼Œ2022-2026ï¼Œcoverage 99.9%
- æ‰€æœ‰ IC è² å€¼ï¼ˆhigher OI â†’ lower returnsï¼‰ï¼Œæœ€å¼· IC=-0.006 < 0.01 (A5 WARN)
- Quintile spread: Q5-Q1 = -1.31 Sharpeï¼ˆå¼·æ¢ä»¶æ•ˆæ‡‰ï¼‰
- F5 filter (pctrank_720 > 0.3): Î” SR +0.317, 8/8 symbols improved, freq loss 29.8%
- æ–¹å‘äº¤äº’ç™¼ç¾: Long+FallingOI SR=1.50(BEST) vs Short+FallingOI SR=0.01(DEAD)
- Quality Gates: 4 PASS + 2 WARN (G1 ICå¼±, G3 confounding partial)
- **Verdict: WEAK GO â†’ Filter**, handoff @quant-developer with ablation requirement
- æ›´æ–° `docs/ALPHA_RESEARCH_MAP.md`ï¼ˆè¦†è“‹åœ°åœ– +#16, åœ–è­œæ›´æ–°, å‰æ²¿æ’åº #2 â†’ WEAK GOï¼‰

### On-Chain Regime Overlay EDA â€” **GO**ï¼ˆAlpha Researcherï¼‰
- æ•¸æ“š: DeFi Llama TVL + ç©©å®šå¹£å¸‚å€¼ï¼ˆ12 on-chain series, 2017-2026, å…è²»ï¼‰
- 18 regime indicators Ã— 8 symbolsï¼Œcoverage â‰¥70% (13/16 metrics pass)
- **tvl_mom_30d IC=0.065**ï¼ˆ>10Ã— OI çš„ IC=0.006ï¼‰ï¼ŒA1-A5 å…¨ PASS
  - A1: 5+/2- years âœ…, A2: shift impact 5.2% âœ…, A3: 8/8 same sign âœ…, A5: ICâ‰¥0.01 âœ…
- **tvl_sc_ratio_mom_30d quintile spread +4.69 (monotonic!)**
- Filter â‰¥P30: **8/8 symbols improved, avg Î” SR = +0.409**, freq loss ~30%
- Risk-On vs Risk-Off: 8/8 symbols Risk-On better, avg Î” SR = +1.454
- G6: avg |corr| = 0.302 with BTC price momentumï¼ˆéƒ¨åˆ†ç¨ç«‹ä¿¡æ¯ï¼‰
- **Quality Gates: 6/6 PASS â†’ GO**
- ä¿®æ­£ stablecoin ä¸‹è¼‰è…³æœ¬ timestamp parsing bugï¼ˆ`int(ts)` castï¼‰
- Handoff: @quant-developer å¯¦ä½œ `onchain_regime_filter()` in `filters.py`
  - å¿…é ˆ ablation: (A) HTF only, (B) On-chain only, (C) HTF + On-chain
- Notebook: `notebooks/research/20260228_onchain_regime_overlay_eda.ipynb`

### On-Chain Regime Filter â€” å¯¦ä½œ + Ablation + Validationï¼ˆQuant Developer + Quant Researcherï¼‰
- **BUG ä¿®å¾©**: `onchain_regime_filter()` lookback 365â†’720ï¼ˆ1h barsï¼Œ365=15å¤©è€Œé30å¤©ï¼‰
- åŒæ­¥ä¿®æ­£ `tsmom_carry_v2_strategy.py` fallback + 2 ablation configs
- **BUG ä¿®å¾©**: `prado_methods.py` CPCV å‘¼å« `probability_of_backtest_overfitting` â†’ `_simplified_pbo_estimate`
- 3-config ablation: A(HTF only)=SR 3.80, B(On-chain only)=SR 4.00, C(HTF+On-chain)=SR 3.88
- B standalone +5.3% SR, MDD -3.49%ï¼ˆbestï¼‰ï¼Œä½† C ç–ŠåŠ é€€åŒ–ï¼ˆåŒ OI æ¨¡å¼ï¼‰
- Full validation on Config B: WFA 8/8 PASS (avg deg -3.2%), CPCV PBO max 0.13, DSR 2.28 p<0.001
- **Verdict: KEEP_BASELINE** â€” å¢é‡ borderline(+5.3%), è§€å¯ŸæœŸå…§ä¸æ›¿æ›, 2/8 symbols é€€åŒ–
- Code preserved, configs ä¿ç•™ä¾› 3/14 å¾Œé‡è©•ä¼°

### OI Regime Filter Ablation â€” FAILï¼ˆQuant Developerï¼‰
- æ–°å¢ `oi_regime_filter()` åˆ° `src/qtrade/strategy/filters.py`ï¼ˆgate pattern, pctrank_720 < 0.3 blockï¼‰
- æ•´åˆåˆ° `tsmom_carry_v2_strategy.py`ï¼ˆHTF filter ä¹‹å¾Œã€turnover control ä¹‹å‰ï¼‰
- 3-config ablation: A(HTF only)=SR 3.86, B(OI only)=SR 4.12, C(HTF+OI)=SR 4.04
- **Incremental SR = +4.66% < 5% threshold â†’ FAIL**
- Key findings: OI standalone (+6.74%) å¯¦éš›ä¸Šæ¯” HTF æ›´å¼·ï¼Œä½†ç–ŠåŠ é€ æˆ over-filter (5/8 symbols SR ä¸‹é™)
- C çš„ MDD æœ€ä½³ (-3.14%) ä½† return æœ€ä½ (+215%)
- Code preserved, 3 ablation configs archived to `config/archive/`
- æ›´æ–° `docs/ALPHA_RESEARCH_MAP.md`ï¼ˆ#16 FAIL, è¦†è“‹åœ°åœ–, ç ”ç©¶æ—¥èªŒï¼‰
- Notebook: `notebooks/research/20260228_oi_regime_filter_eda.ipynb`

## 2026-02-27

### 4h TF ç¶­åº¦ CLOSED â€” æ­¸æª”ï¼ˆAlpha Researcherï¼‰
- ä¿®æ­£ HTF look-ahead å¾Œ 4h Pure SR 3.97 vs baseline 3.77ï¼ˆÎ”=+0.20 åƒ…é‚Šéš›ï¼‰ï¼ŒPBO 52-67%
- ä¹‹å‰ +1.53 SR å®Œå…¨ä¾†è‡ª HTF filter look-ahead biasã€‚æ­¸æª”æ‰€æœ‰ 4h ç ”ç©¶è³‡ç”¢

### HTF Filter intra-bar look-ahead ä¿®æ­£ï¼ˆQuant Developerï¼‰
- `tsmom_carry_v2_strategy.py` `_apply_htf_filter()` 4h/1d reindex å‰åŠ  `shift(1)`
- ä¿®æ­£å¾Œ baseline SR 4.31â†’3.77ï¼ˆ-12.5%ï¼‰ï¼Œlive è¡Œç‚ºå·²æ›´æ–°
- `multi_tf_resonance_strategy.py` åŒ bug å·²ä¿®ï¼ˆéç”Ÿç”¢ï¼‰

### overlay_params cross-contamination bug ä¿®å¾©ï¼ˆQuant Developerï¼‰
- `config.py` `to_backtest_dict()` æ”¹ç”¨ `deepcopy`ï¼Œ`run_backtest.py` é¡å¤– deepcopy
- ä¿®æ­£å¾Œ Portfolio SR 2.87â†’4.31ï¼ŒTotal Return +187.5%â†’+343.7%
- æ–°å¢ `tests/test_overlay_data_isolation.py`ï¼ˆ5 testsï¼‰

### ä¿¡è™Ÿé¡¯ç¤ºä¿®å¾©ï¼ˆDevOps / Quant Developerï¼‰
- WebSocket Runner æ–°å¢ `_generate_startup_signals()` è§£æ±ºå†·å•Ÿå‹•ç©ºçª—
- æ–°å¢ `tests/test_indicator_pipeline.py`ï¼ˆ10 testsï¼‰
- DevOps éƒ¨ç½²æµç¨‹æ–°å¢ Post-Deploy Output Verification

### HTF v2 + LSR éƒ¨ç½²åˆ° Oracle Cloudï¼ˆDevOpsï¼‰
- Config `prod_candidate_htf_lsr.yaml` æ›¿æ› `prod_candidate_htf_filter.yaml`
- é‡å»º `meta_blend_live` + `tg_bot` tmux sessions
- Observation period: 2026-02-27 ~ 2026-03-13

### OI Liq Bounce SHELVED + OI Cascade Overlayï¼ˆQuant Developerï¼‰
- åœæ­¢ paper tradingï¼ˆTime-in-market=4.2%ï¼Œè³‡æºæ•ˆç›Šéä½ï¼‰
- æ–°å¢ `oi_cascade_overlay.py`ï¼Œå›æ¸¬ SR +0.11

### Taker Vol Overlay EDAï¼ˆAlpha Researcherï¼‰
- TVR IC â‰ˆ -0.006~-0.008ï¼ˆå¼±é€†å‘ï¼‰ï¼ŒCVD IC â‰ˆ -0.013~-0.023ï¼ˆé€†å‘ï¼‰
- Verdict: WEAK GO â€” å»ºè­°ä½œç‚º LSR overlay v2 ç¬¬4ç¢ºèªå› å­

### LSR Overlay Aâ†’D å‡ç´š + å®Œæ•´é©—è­‰ GO_NEXT + Risk APPROVEDï¼ˆå…¨æµç¨‹ï¼‰
- OI+FR ç¢ºèªå±¤å‡ç´šï¼ŒWFA 8/8 OOS+, CPCV PBO max 0.13, MC 4/4 PASS
- Config freeze: `prod_candidate_htf_lsr.yaml`

## 2026-02-26

- LSR Confirmatory Overlay å¯¦ä½œ + Meta-Blend æ­£å¼å›æ¸¬ï¼ˆPortfolio SR 2.47 +0.21ï¼‰
- HTF Filter v2 Config Freeze + Validator ä¿®å¾© + GO_NEXT + Risk APPROVEDï¼ˆSR=2.74ï¼‰
- LSR Contrarian ç­–ç•¥ç ”ç©¶ï¼ˆPortfolio SR=1.39ï¼‰+ Hybrid Overlay ç ”ç©¶
- Multi-TF + è¡ç”Ÿå“æ•¸æ“šæ“´å±• Phase 0-4ï¼ˆå®Œæ•´ data/strategy/live pipelineï¼‰

## 2026-02-25

- Satellite ç­–ç•¥æ¢ç´¢æ­¸æª”ï¼ˆBB MR ğŸ”´, Vol Squeeze ğŸŸ¡, FR Carry ğŸ”´, OI Spike ğŸ”´, OI Liq Bounce âœ…ï¼‰
- ç­–ç•¥çµ„åˆç®¡ç†æ¡†æ¶ï¼ˆgovernance doc + compare/generate/portfolio scriptsï¼‰
- OI Liq Bounce å®Œæ•´ç”Ÿå‘½é€±æœŸï¼ˆç ”ç©¶â†’é©—è­‰â†’é¢¨æ§â†’Paper Trading éƒ¨ç½²ï¼‰
- Oracle å¤š Runner æ•¸æ“šç®¡ç·šä¿®å¾©ï¼ˆWatchdog éš”é›¢, OI freshness, è¨˜æ†¶é«”å¿«å–ï¼‰
- çµ±ä¸€ Telegram Bot æ¨¡çµ„ï¼ˆMultiStrategyBot, Paper ç­–ç•¥åµæ¸¬, æ’ä»–å¼æ­¸é¡ï¼‰
- Meta-Blend 8-Symbol ç”Ÿç”¢éƒ¨ç½²ï¼ˆæ›¿æ› R3C 10-Symbolï¼‰
- å›æ¸¬æ•¸æ“šå»¶ä¼¸è‡³ 2020 å¹´èµ· + äº¤æ˜“å¾©ç›¤å·¥å…·
