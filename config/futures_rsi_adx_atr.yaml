# åˆç´„ç­–ç•¥é…ç½®ç¯„ä¾‹ï¼šRSI + ADX + ATR
# 
# èˆ‡ç¾è²¨ç‰ˆæœ¬ (rsi_adx_atr.yaml) ä½¿ç”¨ç›¸åŒç­–ç•¥ï¼Œä½†æ”¯æ´åšç©º
# 
# ä½¿ç”¨æ–¹å¼ï¼š
#   python scripts/download_data.py -c config/futures_rsi_adx_atr.yaml
#   python scripts/run_backtest.py -c config/futures_rsi_adx_atr.yaml
#   python scripts/run_live.py -c config/futures_rsi_adx_atr.yaml --paper

market:
  symbols: ["BTCUSDT", "ETHUSDT"]
  interval: "1h"
  start: "2022-01-01"
  end: null
  market_type: "futures"  # ä½¿ç”¨åˆç´„ API

# åˆç´„å°ˆå±¬é…ç½®
futures:
  leverage: 5             # æ§“æ¡¿å€æ•¸ï¼ˆå»ºè­° 1-5 å€ï¼‰
  margin_type: "ISOLATED" # ISOLATEDï¼ˆé€å€‰ï¼‰æˆ– CROSSEDï¼ˆå…¨å€‰ï¼‰
  position_mode: "ONE_WAY" # ONE_WAYï¼ˆå–®å‘ï¼‰æˆ– HEDGEï¼ˆé›™å‘ï¼‰
  direction: "both"       # äº¤æ˜“æ–¹å‘: "both"=å¤šç©ºéƒ½åš, "long_only"=åªåšå¤š, "short_only"=åªåšç©º
  leverage_sizing: false  # æ§“æ¡¿æ˜¯å¦æ”¾å¤§å€‰ä½ï¼Ÿ
                          #   falseï¼ˆé è¨­ï¼‰: åç¾© = æ¬Šç›Š Ã— åˆ†é…æ¯” â†’ ä¿å®ˆï¼Œæ§“æ¡¿åªé™ä¿è­‰é‡‘
                          #     ä¾‹: $1,500 Ã— 35% = $525 åç¾©, 5x åªéœ€ $105 ä¿è­‰é‡‘
                          #   true: åç¾© = æ¬Šç›Š Ã— åˆ†é…æ¯” Ã— æ§“æ¡¿ â†’ å……åˆ†åˆ©ç”¨æ§“æ¡¿
                          #     ä¾‹: $1,500 Ã— 35% Ã— 5 = $2,625 åç¾©, $525 ä¿è­‰é‡‘

strategy:
  name: "rsi_adx_atr"
  params:
    # RSI åƒæ•¸
    rsi_period: 10
    oversold: 30           # RSI < 30 â†’ åšå¤š
    overbought: 70         # RSI > 70 â†’ åšç©ºï¼ˆåˆç´„å°ˆç”¨ï¼‰
    
    # ADX éæ¿¾å™¨
    min_adx: 15
    adx_period: 14
    
    # ATR æ­¢ææ­¢ç›ˆ
    stop_loss_atr: 1.5     # æ­¢æ = 1.5 ATR
    take_profit_atr: 4.0   # æ­¢ç›ˆ = 4.0 ATR
    atr_period: 14
    
    # å†·å»æœŸ
    cooldown_bars: 1

  # å¹£ç¨®å°ˆå±¬åƒæ•¸è¦†å¯«
  symbol_overrides:
    BTCUSDT:
      oversold: 30
      overbought: 70
    ETHUSDT:
      oversold: 35
      overbought: 65

backtest:
  initial_cash: 10000
  fee_bps: 4              # åˆç´„æ‰‹çºŒè²»è¼ƒä½ï¼ˆMaker 0.02%, Taker 0.04%ï¼‰
  slippage_bps: 3
  trade_on: "next_open"
  validate_data: true
  clean_data: true

# é¢¨æ§ï¼ˆåˆç´„å»ºè­°æ›´ä¿å®ˆï¼‰
risk:
  max_drawdown_pct: 0.65  # 65% ç†”æ–·ï¼ˆ5x æ§“æ¡¿ä¸‹ 1x MDDâ‰ˆ14% â†’ 5xâ‰ˆ57%ï¼Œç•™ç·©è¡ï¼‰

# å€‰ä½è¨ˆç®—
position_sizing:
  method: "fixed"
  position_pct: 1.0
  kelly_fraction: 0.25

# å¤šå¹£ç¨®å€‰ä½åˆ†é…
portfolio:
  cash_reserve: 0.30      # åˆç´„ä¿ç•™ 30% ç¾é‡‘ï¼ˆä½œç‚ºä¿è­‰é‡‘ç·©è¡ï¼‰
  allocation: null

# Telegram é€šçŸ¥ï¼ˆä½¿ç”¨ç¨ç«‹çš„ Botï¼‰
notification:
  telegram_bot_token: ${FUTURES_TELEGRAM_BOT_TOKEN}
  telegram_chat_id: ${FUTURES_TELEGRAM_CHAT_ID}
  prefix: "ğŸ”´ [FUTURES]"
  enabled: true

output:
  report_dir: "./reports"
