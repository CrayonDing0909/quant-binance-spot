# åˆç´„ç­–ç•¥é…ç½®ï¼šXSMOMï¼ˆCross-Sectional Momentumï¼‰
#
# ç­–ç•¥åŸç†ï¼š
#   1. å¤šçª—å£æ®˜å·®å‹•é‡åˆ†æ•¸ï¼ˆå»é™¤ BTC å¸‚å ´å› å­å¾Œæ’åï¼‰
#   2. è·³éæœ€è¿‘ 24hï¼ˆé¿å…çŸ­æœŸåè½‰æ•ˆæ‡‰ï¼‰
#   3. å¤š lookback é›†æˆ â†’ ç©©å¥æ€§
#   4. æ³¢å‹•ç‡ç›®æ¨™ç¸®æ”¾
#
# è¨­è¨ˆæ€è·¯ï¼ˆèˆ‡ TSMOM æ­£äº¤ï¼‰ï¼š
#   - TSMOM åŸºæ–¼çµ•å°å‹•é‡ï¼ˆè‡ªå·±è·Ÿè‡ªå·±æ¯”ï¼‰
#   - XSMOM åŸºæ–¼ç›¸å°å‹•é‡ï¼ˆå¹£ç¨®é–“æ¯”è¼ƒ â†’ æ®˜å·®æ’åï¼‰
#   - ç›¸é—œæ€§ ~0.3 â†’ çµ„åˆæœ‰æ•ˆ
#
# å¯é¸ç­–ç•¥åï¼š
#   - xsmom         â€” æ®˜å·®å‹•é‡æ’å
#   - xsmom_tsmom   â€” XSMOM + TSMOM çµ„åˆ
#
# ä½¿ç”¨æ–¹å¼ï¼š
#   python scripts/run_backtest.py -c config/futures_xsmom.yaml --symbol ETHUSDT
#   python scripts/run_portfolio_backtest.py -c config/futures_xsmom.yaml
#   python scripts/run_walk_forward.py -c config/futures_xsmom.yaml --splits 5

market:
  symbols: ["BTCUSDT", "ETHUSDT", "SOLUSDT"]
  interval: "1h"
  start: "2022-01-01"
  end: null
  market_type: "futures"

futures:
  leverage: 3
  margin_type: "ISOLATED"
  position_mode: "ONE_WAY"
  direction: "both"

strategy:
  name: "xsmom"
  params:
    # â•â•â• Universe â•â•â•
    universe:
      - BTCUSDT
      - ETHUSDT
      - SOLUSDT
      - BNBUSDT
      - DOGEUSDT
      - XRPUSDT
      - AVAXUSDT
      - LINKUSDT
      - ADAUSDT
    data_dir: "data"
    market_symbol: "BTCUSDT"       # å¸‚å ´å› å­ï¼ˆæ®˜å·®è¨ˆç®—ç”¨ï¼‰

    # â•â•â• Momentum Signal â•â•â•
    lookbacks: [336, 720, 1440]    # 14d / 30d / 60d
    skip_recent: 24                # è·³éæœ€è¿‘ 24hï¼ˆåè½‰æ•ˆæ‡‰ï¼‰
    use_residual: true             # å»é™¤ BTC å› å­

    # â•â•â• Ranking Thresholds â•â•â•
    long_threshold: 0.7            # top 30% â†’ åšå¤š
    short_threshold: 0.3           # bottom 30% â†’ åšç©º
    scale_mode: "threshold"        # "threshold" or "linear"

    # â•â•â• Vol Scaling â•â•â•
    vol_target: 0.15               # å¹´åŒ–æ³¢å‹•ç‡ç›®æ¨™

  symbol_overrides: {}

backtest:
  initial_cash: 10000
  fee_bps: 5
  slippage_bps: 3
  trade_on: "next_open"
  validate_data: true
  clean_data: true

  funding_rate:
    enabled: true
    default_rate_8h: 0.0001
    use_historical: true

  slippage_model:
    enabled: false

risk:
  max_drawdown_pct: 0.30

position_sizing:
  method: "fixed"
  position_pct: 1.0

portfolio:
  cash_reserve: 0
  allocation:
    BTCUSDT: 0.34
    ETHUSDT: 0.33
    SOLUSDT: 0.33

live:
  kline_cache: true
  flip_confirmation: false
  prefer_limit_order: true
  limit_order_timeout_s: 10

notification:
  telegram_bot_token: ${FUTURES_TELEGRAM_BOT_TOKEN}
  telegram_chat_id: ${FUTURES_TELEGRAM_CHAT_ID}
  prefix: "ğŸ”´ [XSMOM]"
  enabled: true

output:
  report_dir: "./reports"
