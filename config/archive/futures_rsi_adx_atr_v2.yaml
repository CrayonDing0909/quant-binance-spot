# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# åˆç´„ç­–ç•¥ v2ï¼šåŸºæ–¼ A/B æ¸¬è©¦çš„ä¿å®ˆæ”¹é€²ç‰ˆ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# v1 â†’ v2 å”¯ä¸€æ”¹å‹•ï¼šETH é…ç½®å¾ 1.0 â†’ 0.5
#
# å¯¦é©—çµè«–ï¼ˆ2026-02-17ï¼‰ï¼š
#   âŒ trailing_stop_atr=2.5 â†’ ç½é›£ï¼ˆå‡å€¼å›æ­¸ç­–ç•¥ä¸é©ç”¨ trailing stopï¼‰
#   âŒ htf_mode=hard           â†’ æ®ºå¤ªå¤šäº¤æ˜“ï¼ŒETH ç¿»è² 
#   âŒ counter_weight=0.0      â†’ ä¸­æ€§ï¼Œä½†ç  37% æ”¶ç›Š
#   âŒ æ”¶ç·Š RSI quantile       â†’ é…åˆ trailing ä¸€èµ·æ¸¬çš„ï¼Œä¹Ÿæ˜¯è² é¢
#   âœ… v1 åƒæ•¸å·²ç¶“æ˜¯æœ€å„ª       â†’ ä¸å‹•
#
# å”¯ä¸€æ”¹å‹•ç†ç”±ï¼š
#   ETH PF 1.06 â†’ edge å¤ªè–„ï¼Œä¸å€¼å¾— full allocation
#   æ¸›åŠå¾Œï¼šé¢¨éšªæ¸›åŠï¼Œå¦‚æœ alpha æ¶ˆå¤±æå¤±æœ‰é™
#
# ä¸‹ä¸€æ­¥ï¼šç”¨ä¿®å¾©å¾Œçš„ WFAï¼ˆå« adjusted_statsï¼‰é‡æ–°é©—è­‰
#   python scripts/validate.py -c config/futures_rsi_adx_atr_v2.yaml --all

market:
  symbols: ["ETHUSDT", "SOLUSDT"]
  interval: "1h"
  start: "2022-01-01"
  end: null
  market_type: "futures"

futures:
  leverage: 5
  margin_type: "ISOLATED"
  position_mode: "ONE_WAY"
  direction: "both"

strategy:
  name: "rsi_adx_atr"
  params:
    # æ‰€æœ‰åƒæ•¸èˆ‡ v1 å®Œå…¨ç›¸åŒ
    rsi_mode: "dynamic"
    rsi_period: 10
    rsi_lookback_days: 14
    rsi_quantile_low: 0.10
    rsi_quantile_high: 0.90
    oversold: 30
    overbought: 80
    min_adx: 15
    short_min_adx: 20
    adx_period: 14
    use_funding_filter: true
    fr_max_pos: 0.0002
    fr_max_neg: -0.0002
    stop_loss_atr: 2.0
    take_profit_atr: null
    atr_period: 14
    adaptive_sl: true
    adaptive_sl_er_period: 10
    er_sl_min: 1.5
    er_sl_max: 2.5
    cooldown_bars: 3
    min_hold_bars: 2
    min_atr_ratio: 0.005
    vol_filter_mode: "absolute"
    htf_interval: "4h"
    htf_mode: "soft"
    htf_ema_fast: 20
    htf_ema_slow: 50
    htf_align_weight: 1.0
    htf_counter_weight: 0.5    # ä¿æŒä¸è®Šï¼ˆå¯¦é©—è­‰æ˜ 0.0 æ›´å·®ï¼‰
    htf_neutral_weight: 0.75

  symbol_overrides: {}

backtest:
  initial_cash: 10000
  fee_bps: 4
  slippage_bps: 3
  trade_on: "next_open"
  validate_data: true
  clean_data: true
  funding_rate:
    enabled: true
    default_rate_8h: 0.0001
    use_historical: true
  slippage_model:
    enabled: true
    base_bps: 2
    impact_coefficient: 0.1
    impact_power: 0.5
    adv_lookback: 20
    participation_rate: 0.10

risk:
  max_drawdown_pct: 0.65

position_sizing:
  method: "fixed"
  position_pct: 1.0
  kelly_fraction: 0.25
  target_volatility: 0.50
  vol_lookback: 168

# ğŸ”§ v2 å”¯ä¸€æ”¹å‹•ï¼šETH æ¸›åŠ
portfolio:
  cash_reserve: 0
  allocation:
    ETHUSDT: 0.50              # v1: 1.0 â†’ v2: 0.5ï¼ˆPF 1.06 ä¸å€¼å¾— full allocationï¼‰
    SOLUSDT: 1.00              # ä¸è®Šï¼ˆSOL PF 1.20ï¼Œä¸»åŠ› alphaï¼‰
    # ç¸½æ›éšª 150%ï¼ˆ1.5xï¼‰ï¼Œ5x æ§“æ¡¿ä¸‹ä¿è­‰é‡‘ç”¨ 30%
    # çœä¸‹çš„ 50% ETH æ›éšªå¯ä»¥ç­‰æ–°ç­–ç•¥ or æ–°å¹£ç¨®

live:
  kline_cache: true
  flip_confirmation: false
  prefer_limit_order: true
  limit_order_timeout_s: 10

notification:
  telegram_bot_token: ${FUTURES_TELEGRAM_BOT_TOKEN}
  telegram_chat_id: ${FUTURES_TELEGRAM_CHAT_ID}
  prefix: "ğŸ”´ [FUTURES-v2]"
  enabled: true

output:
  report_dir: "./reports"
