# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PRODUCTION LIVE â€” OI Liquidation Bounce v4.2 (Paper Trading)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Created: 2026-02-25
# Origin: config/research_oi_liq_bounce.yaml (Risk Manager APPROVED)
# Purpose: Paper trading â‰¥ 2 weeks before live deployment
#
# Risk Audit Conditions (MANDATORY):
#   1. position_pct = 0.50 (not 1.0) â€” half sizing
#   2. circuit_breaker_pct = 0.10 (10% drawdown kills trading)
#   3. Paper trading â‰¥ 2 weeks before scaling up
#   4. Confirm OI data source stability
#
# Strategy Summary:
#   5-symbol long-only (BTC/ETH/SOL/DOGE/AVAX), 1x leverage
#   OR-gate entry: OI liquidation drop OR Volume spike
#   Per-symbol tuning via symbol_overrides
#   Portfolio SR=2.49, MDD=-1.3%, Time-in-market=4.2%
#   Correlation with R3C â‰ˆ 0.01 (fully independent)
#
# Deployment Note:
#   èˆ‡ R3C åŒå¸³æˆ¶å¹³è¡Œé‹è¡Œéœ€ HEDGE_MODE æˆ–å­å¸³è™Ÿã€‚
#   Paper Trading æ¨¡å¼ä¸‹ç„¡æ­¤é™åˆ¶ã€‚
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

market:
  symbols:
    - BTCUSDT
    - ETHUSDT
    - SOLUSDT
    - DOGEUSDT
    - AVAXUSDT
  interval: "1h"
  start: "2022-01-01"
  end: null
  market_type: "futures"

futures:
  leverage: 1
  margin_type: "ISOLATED"
  position_mode: "ONE_WAY"
  direction: "long_only"

strategy:
  name: "oi_liq_bounce"
  params:
    # â”€â”€ Core signal â€” Path A (OI Liquidation) â”€â”€
    oi_change_lookback: 24
    price_change_lookback: 8
    z_window: 720
    oi_z_threshold: -1.5
    price_z_threshold: -1.0

    # â”€â”€ Core signal â€” Path B (Volume Spike) â”€â”€
    vol_spike_enabled: false     # é è¨­é—œé–‰; BTC/ETH/DOGE å„è‡ªå•Ÿç”¨
    vol_spike_threshold: 2.0
    vol_spike_lookback: 24

    # â”€â”€ Exit â”€â”€
    exit_mode: "hybrid"
    hold_bars: 36
    stop_loss_atr: 3.0

    # â”€â”€ HTF Trend Filter â”€â”€
    htf_filter_enabled: true
    htf_regime_mode: "ema"
    htf_ema_period: 50
    htf_adx_period: 14
    htf_adx_threshold: 20

    # â”€â”€ FR Spike Filter (optional, disabled) â”€â”€
    fr_spike_enabled: false
    fr_z_threshold: -0.5
    fr_change_lookback: 2

    # â”€â”€ Vol Scaling â”€â”€
    vol_scale_enabled: true
    vol_target: 0.15
    vol_lookback: 168

    # â”€â”€ Cooldown â”€â”€
    cooldown_bars: 12

  symbol_overrides:
    BTCUSDT:
      exit_mode: "fixed_hold"
      hold_bars: 24
      htf_regime_mode: "ema_adx"
      htf_adx_threshold: 20
      oi_z_threshold: -1.3
      vol_spike_enabled: true
      vol_spike_threshold: 1.5
      vol_spike_lookback: 48
    ETHUSDT:
      exit_mode: "hybrid"
      hold_bars: 36
      stop_loss_atr: 3.0
      htf_regime_mode: "ema"
      vol_spike_enabled: true
      vol_spike_threshold: 2.5
      vol_spike_lookback: 24
    SOLUSDT:
      exit_mode: "hybrid"
      hold_bars: 48
      stop_loss_atr: 3.0
      htf_regime_mode: "ema"
    DOGEUSDT:
      exit_mode: "fixed_hold"
      hold_bars: 24
      htf_regime_mode: "ema"
      vol_spike_enabled: true
      vol_spike_threshold: 2.5
      vol_spike_lookback: 24
    AVAXUSDT:
      exit_mode: "hybrid"
      hold_bars: 48
      stop_loss_atr: 3.0
      htf_regime_mode: "ema"

# â”€â”€ Backtest (for reference, used by PaperBroker fee/slippage) â”€â”€
backtest:
  initial_cash: 10000
  fee_bps: 5
  slippage_bps: 3
  trade_on: "next_open"
  validate_data: true
  clean_data: true
  funding_rate:
    enabled: true
    default_rate_8h: 0.0001
    use_historical: true
  slippage_model:
    enabled: true
    base_bps: 2.0
    impact_coefficient: 0.1
    impact_power: 0.5
    adv_lookback: 20
    participation_rate: 0.10

# â”€â”€ Risk (Risk Audit conditions) â”€â”€
risk:
  max_drawdown_pct: 0.10   # 10% circuit breaker (Risk Audit requirement)

# â”€â”€ Position Sizing (Risk Audit: half sizing) â”€â”€
position_sizing:
  method: "fixed"
  position_pct: 0.50       # 50% sizing (Risk Audit requirement, not 1.0)

# â”€â”€ Portfolio Allocation â”€â”€
portfolio:
  cash_reserve: 0
  allocation:
    BTCUSDT: 0.30
    ETHUSDT: 0.25
    SOLUSDT: 0.20
    DOGEUSDT: 0.15
    AVAXUSDT: 0.10

# â”€â”€ Live Settings â”€â”€
live:
  kline_cache: true
  flip_confirmation: false

# â”€â”€ Notification â”€â”€
notification:
  telegram_bot_token: ${FUTURES_TELEGRAM_BOT_TOKEN}
  telegram_chat_id: ${FUTURES_TELEGRAM_CHAT_ID}
  prefix: "ğŸ“‹ [PAPER-OI-LIQ-5S-1x]"
  enabled: true

output:
  report_dir: "./reports"
