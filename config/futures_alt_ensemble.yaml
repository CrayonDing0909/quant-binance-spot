# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# åˆç´„ç­–ç•¥é…ç½®ï¼šAlt Ensemble (ETH+SOL TSMOM, Debounce ON)
#
# é©—æ”¶ç‹€æ…‹ï¼šConditional Go (2026-02-19)
# å‰æï¼š30 å¤© paper trade é€šéå¾Œæ–¹å¯åˆ‡ real
#
# ç­–ç•¥è·¯ç”±ï¼š
#   ETHUSDT â†’ tsmom_multi_ema (disagree_weight=0, debounce ON)
#   SOLUSDT â†’ tsmom_ema       (disagree_weight=0, debounce ON)
#   BTCUSDT â†’ ä¸äº¤æ˜“ï¼ˆcash 0 exposureï¼‰
#
# æ¬Šé‡ï¼šETH 54% / SOL 46%
#
# ä½¿ç”¨æ–¹å¼ï¼š
#   # Paper Tradingï¼ˆWebSocket æ¨¡å¼ï¼‰
#   python scripts/run_websocket.py -c config/futures_alt_ensemble.yaml --paper
#
#   # Real Tradingï¼ˆé€šé 30 å¤© paper å¾Œï¼‰
#   python scripts/run_websocket.py -c config/futures_alt_ensemble.yaml --real
#
#   # é¢¨æ§ç›£æ§
#   python scripts/risk_guard.py -c config/risk_guard_alt_ensemble.yaml --dry-run
#
#   # å›æ¸¬é©—è­‰
#   python scripts/run_backtest.py -c config/futures_alt_ensemble.yaml --symbol ETHUSDT
#   python scripts/run_backtest.py -c config/futures_alt_ensemble.yaml --symbol SOLUSDT
#   python scripts/run_portfolio_backtest.py -c config/futures_alt_ensemble.yaml
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

market:
  symbols: ["ETHUSDT", "SOLUSDT"]
  interval: "1h"
  start: "2022-01-01"
  end: null
  market_type: "futures"

futures:
  leverage: 5
  margin_type: "ISOLATED"
  position_mode: "ONE_WAY"
  direction: "both"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# é è¨­ç­–ç•¥ï¼ˆä¸åœ¨ ensemble.strategies ä¸­çš„ symbol ä½¿ç”¨æ­¤ç­–ç•¥ï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
strategy:
  name: "tsmom_multi_ema"
  params:
    lookbacks: [72, 168, 336, 720]
    vol_target: 0.15
    ema_fast: 20
    ema_slow: 50
    agree_weight: 1.0
    disagree_weight: 0.0   # Debounce ON
    vol_regime_enabled: false

  symbol_overrides: {}

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ensemble: æ¯å€‹ symbol ç¨ç«‹ç­–ç•¥ + åƒæ•¸
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ensemble:
  enabled: true

  weight_mode: "fixed"

  fixed_weights:
    ETHUSDT: 0.54
    SOLUSDT: 0.46

  vol_parity:
    lookback: 720
    min_weight: 0.30
    max_weight: 0.70

  strategies:
    ETHUSDT:
      name: "tsmom_multi_ema"
      params:
        lookbacks: [72, 168, 336, 720]
        vol_target: 0.15
        ema_fast: 20
        ema_slow: 50
        agree_weight: 1.0
        disagree_weight: 0.0   # Debounce ON
        vol_regime_enabled: false

    SOLUSDT:
      name: "tsmom_ema"
      params:
        lookback: 168
        vol_target: 0.15
        ema_fast: 20
        ema_slow: 50
        agree_weight: 1.0
        disagree_weight: 0.0   # Debounce ON
        vol_regime_enabled: false

backtest:
  initial_cash: 10000
  fee_bps: 5
  slippage_bps: 3
  trade_on: "next_open"
  validate_data: true
  clean_data: true

  funding_rate:
    enabled: true
    default_rate_8h: 0.0001
    use_historical: true

  slippage_model:
    enabled: false

risk:
  max_drawdown_pct: 0.12    # 12% â€” èˆ‡ risk_guard çš„ FLATTEN_ALL é–¾å€¼ä¸€è‡´

position_sizing:
  method: "fixed"
  position_pct: 1.0

portfolio:
  cash_reserve: 0
  allocation:
    ETHUSDT: 0.54
    SOLUSDT: 0.46

live:
  kline_cache: true
  flip_confirmation: false
  prefer_limit_order: true
  limit_order_timeout_s: 10

notification:
  telegram_bot_token: ${FUTURES_TELEGRAM_BOT_TOKEN}
  telegram_chat_id: ${FUTURES_TELEGRAM_CHAT_ID}
  prefix: "ğŸŸ£ [ALT-ENS]"
  enabled: true

output:
  report_dir: "./reports"
